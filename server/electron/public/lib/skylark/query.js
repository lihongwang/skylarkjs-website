/**
 * skylark - An Elegant JavaScript Library and HTML5 Application Framework.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark/skylark","skylark/langx","skylark/async","skylark/noder","skylark/datax","skylark/eventer","skylark/finder","skylark/geom","skylark/styler","skylark/fx"],function(t,n,e,r,i,a,s,o,c,f){function u(t,n){return function(){var e=this,r=b.call(arguments),i=$.map(e,function(e,i){return t.apply(n,[e].concat(r))});return $(j(i))}}function h(t,n,e){return function(r){var i=(b.call(arguments),this.map(function(i,a){return t.apply(n,e?[a]:[a,r])}));return e&&r?i.filter(r):i}}function l(t,n){return function(){var e=this,r=b.call(arguments);return this.each(function(e){t.apply(n,[this].concat(r))}),e}}function p(t,n,e){return function(r){var i=this,a=b.call(arguments);return A.call(i,function(i,s){C(i,r,s,e(i));t.apply(n,[i,r].concat(a.slice(1)))}),i}}function d(t,n){return function(){var e=this,r=b.call(arguments);return m.call(e,function(e){return t.apply(n,[e].concat(r))})}}function y(t,e,r){return function(i,a){var s=this,o=b.call(arguments);return n.isPlainObject(i)||n.isDefined(a)?(A.call(s,function(n,i){var s;s=r?C(n,a,i,r(n)):a,t.apply(e,[n].concat(o))}),s):s[0]?t.apply(e,[s[0],i]):void 0}}function g(t,e,r){return function(i){var a=this;return n.isDefined(i)?(A.call(a,function(n,a){var s;s=r?C(n,i,a,r(n)):i,t.apply(e,[n,s])}),a):a[0]?t.apply(e,[a[0]]):void 0}}var v,m=Array.prototype.some,k=Array.prototype.push,b=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),w=(Array.prototype.map,Array.prototype.filter),A=Array.prototype.forEach,x=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,C=n.funcArg,O=n.isArrayLike,N=n.isString,j=n.uniq,E=n.isFunction,T=n.type,z=n.isArray,q=(n.isWindow,n.isDocument),S=n.isObject,D=(n.isPlainObject,n.compact,n.flatten,n.camelCase,n.dasherize,s.children,n.klass({klassName:"SkNodeList",init:function(t,e){var i,a,o,c,f=this;return t&&(f.context=e=e||r.doc(),N(t)?(f.selector=t,i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:x.exec(t),i?i[1]?(a=r.createFragment(t),n.isPlainObject(e)&&(c=e)):(o=s.byId(i[2],r.ownerDoc(e)),o&&(a=[o])):a=s.descendants(e,t)):a=z(t)?t:[t]),a&&(k.apply(f,a),c&&f.attr(c)),f}},Array)),P=function(){function t(t,e,i){return function(i){var a,s=n.map(arguments,function(t){return a=T(t),"object"==a||"array"==a||null==t?t:r.createFragment(t)});return s.length<1?this:(this.each(function(n){t.apply(e,[this,s,n>0])}),this)}}v=function(t){return t instanceof D},init=function(t,n){return new D(t,n)};var e=function(t,n){return E(t)?void a.ready(function(){t(e)}):v(t)?t:n&&v(n)&&N(t)?n.find(t):init(t,n)};e.fn=D.prototype,n.mixin(e.fn,{map:function(t){return e(n.map(this,function(n,e){return t.call(n,e,n)}))},slice:function(){return e(b.apply(this,arguments))},get:function(t){return void 0===t?b.call(this):this[t>=0?t:t+this.length]},toArray:function(){return b.call(this)},size:function(){return this.length},remove:l(r.remove,r),each:function(t){return n.each(this,t),this},filter:function(t){return E(t)?this.not(this.not(t)):e(w.call(this,function(n){return s.matches(n,t)}))},add:function(t,n){return e(j(this.concat(e(t,n))))},is:function(t){return this.length>0&&s.matches(this[0],t)},not:function(t){var n=[];if(E(t)&&void 0!==t.call)this.each(function(e){t.call(this,e)||n.push(this)});else{var r="string"==typeof t?this.filter(t):O(t)&&E(t.item)?b.call(t):e(t);this.forEach(function(t){r.indexOf(t)<0&&n.push(t)})}return e(n)},has:function(t){return this.filter(function(){return S(t)?r.contains(this,t):e(this).find(t).size()})},eq:function(t){return t===-1?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:h(s.descendants,s),closest:function(t,n){var r=this[0],i=!1;for("object"==typeof t&&(i=e(t));r&&!(i?i.indexOf(r)>=0:s.matches(r,t));)r=r!==n&&!q(r)&&r.parentNode;return e(r)},parents:h(s.ancestors,s,!0),parent:h(s.parent,s,!0),children:h(s.children,s,!0),contents:u(r.contents,r),siblings:h(s.siblings,s,!0),empty:l(r.empty,r),pluck:function(t){return n.map(this,function(n){return n[t]})},show:l(f.show,f),replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=E(t);if(this[0]&&!n)var r=e(t).get(0),i=r.parentNode||this.length>1;return this.each(function(a){e(this).wrapAll(n?t.call(this,a):i?r.cloneNode(!0):r)})},wrapAll:function(t){if(this[0]){e(this[0]).before(t=e(t));for(var n;(n=t.children()).length;)t=n.first();e(t).append(this)}return this},wrapInner:function(t){var n=E(t);return this.each(function(r){var i=e(this),a=i.contents(),s=n?t.call(this,r):t;a.length?a.wrapAll(s):i.append(s)})},unwrap:function(t){return 0===this.parent().children().length?this.parent(t).not("body").each(function(){e(this).replaceWith(document.createTextNode(this.childNodes[0].textContent))}):this.parent().each(function(){e(this).replaceWith(e(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:l(f.hide,f),toggle:function(t){return this.each(function(){var n=e(this);(void 0===t?"none"==n.css("display"):t)?n.show():n.hide()})},prev:function(t){return e(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return e(this.pluck("nextElementSibling")).filter(t||"*")},html:g(r.html,r,r.html),text:g(i.text,i,i.text),attr:y(i.attr,i,i.attr),removeAttr:l(i.removeAttr,i),prop:y(i.prop,i,i.prop),data:y(i.data,i,i.data),removeData:l(i.removeData,i),val:g(i.val,i,i.val),offset:g(o.pageRect,o,o.pageRect),style:y(c.css,c),css:y(c.css,c),index:function(t){return t?this.indexOf(e(t)[0]):this.parent().children().indexOf(this[0])},hasClass:d(c.hasClass,c),addClass:p(c.addClass,c,c.className),removeClass:p(c.removeClass,c,c.className),toggleClass:p(c.toggleClass,c,c.className),scrollTop:g(o.scrollTop,o),scrollLeft:g(o.scrollLeft,o),position:function(){if(this.length){var t=this[0];return o.relativePosition(t)}},offsetParent:u(o.offsetParent,o)}),e.fn.detach=e.fn.remove,e.fn.size=g(o.size,o),e.fn.width=g(o.width,o,o.width),e.fn.height=g(o.height,o,o.height),["width","height"].forEach(function(t){var n=t.replace(/./,function(t){return t[0].toUpperCase()});e.fn["outer"+n]=function(n,e){if(arguments.length?"boolean"!=typeof n&&(e=n,n=!1):(n=!1,e=void 0),void 0===e){var r=this[0],i=o.size(r);if(n){var a=o.marginExtents(r);i.width=i.width+a.left+a.right,i.height=i.height+a.top+a.bottom}return"width"===t?i.width:i.height}return this.each(function(r,i){var a={},s=o.marginExtents(i);"width"===t?(a.width=e,n&&(a.width=a.width-s.left-s.right)):(a.height=e,n&&(a.height=a.height-s.top-s.bottom)),o.size(i,a)})}}),e.fn.innerWidth=g(o.width,o,o.width),e.fn.innerHeight=g(o.height,o,o.height);r.traverse;return e.fn.after=t(r.after,r),e.fn.prepend=t(r.prepend,r),e.fn.before=t(r.before,r),e.fn.append=t(r.append,r),e.fn.insertAfter=function(t){return e(t).after(this),this},e.fn.insertBefore=function(t){return e(t).before(this),this},e.fn.appendTo=function(t){return e(t).append(this),this},e.fn.prependTo=function(t){return e(t).prepend(this),this},e}();return function(t){t.fn.on=l(a.on,a),t.fn.off=l(a.off,a),t.fn.trigger=l(a.trigger,a),"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(n){t.fn[n]=function(t,e){return 0 in arguments?this.on(n,t,e):this.trigger(n)}}),t.fn.one=function(t,e,r,i){return n.isString(e)||n.isFunction(i)||(i=r,r=e,e=null),n.isFunction(r)&&(i=r,r=null),this.on(t,e,r,i,1)},t.fn.animate=l(f.animate,f),t.fn.show=l(f.show,f),t.fn.hide=l(f.hide,f),t.fn.toogle=l(f.toogle,f),t.fn.fadeTo=l(f.fadeTo,f),t.fn.fadeIn=l(f.fadeIn,f),t.fn.fadeOut=l(f.fadeOut,f),t.fn.fadeToggle=l(f.fadeToggle,f)}(P),function(t){t.fn.end=function(){return this.prevObject||t()},t.fn.andSelf=function(){return this.add(this.prevObject||t())},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings".split(",").forEach(function(n){var e=t.fn[n];t.fn[n]=function(){var t=e.apply(this,arguments);return t.prevObject=this,t}})}(P),function(t){t.fn.query=t.fn.find,t.fn.place=function(t,e){return n.isString(t)?t=s.descendant(t):v(t)&&(t=t[0]),this.each(function(n,i){switch(e){case"before":r.before(t,i);break;case"after":r.after(t,i);break;case"replace":r.replace(t,i);break;case"only":r.empty(t),r.append(t,i);break;case"first":r.prepend(t,i);break;default:r.append(t,i)}})},t.fn.addContent=function(t,e){return t.template&&(t=n.substitute(t.template,t)),this.append(t)},t.fn.replaceClass=function(t,n){return this.removeClass(n),this.addClass(t),this}}(P),t.query=P});